{% extends 'classroom/base.html' %}
{% block style %} {% load static %}
<link rel="stylesheet" href="{% static 'classroom/styles/style.css' %}">
<link rel="stylesheet" href="{% static 'classroom/styles/navbar.css' %}">
{% endblock style %}
{% block title %}<title>OpenClassroom</title>{% endblock title %}
{% block content %} {% load static %}
<div class="classrooms-dashboard">
  {% if classrooms %}
    {% if classrooms.my_teachings %}
    <div class="my-teachings classes-section">
      <div class="heading"><i class='bx bx-user-voice'></i><span>My Teachings</span></div>
      <div class="classrooms-container">
        {% for classroom in classrooms.my_teachings %}
        <a class="classroom" href="{% url 'classroom:classroom_detail' classroom.id %}">
          <div class="classroom-heading">
            <i class='bx bx-chalkboard bg'></i>
            <div class="title">{{ classroom.name }}</div>
            <div class="course">{{ classroom.course }}</div>
          </div>
          <div class="info">
            <div class="num-students i-item">
              <i class='bx bx-group'></i><span>{{ classroom.num_students }} Students</span>
            </div>
            <div class="event-info i-item">
              <i class='bx bx-calendar-event'></i><span>{{classroom.upcoming_events.num_events}} upcoming events</span>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
    {% if classrooms.my_learnings %}
    <div class="my-learnings classes-section">
      <div class="heading"><i class='bx bx-book'></i><span>My Learnings</span></div>
      <div class="classrooms-container">
        {% for classroom in classrooms.my_learnings %}
        <a class="classroom" href="{% url 'classroom:classroom_detail' classroom.id %}">
          <div class="classroom-heading">
            <i class='bx bxl-redux bg'></i>
            <div class="title">{{ classroom.name }}</div>
            <div class="course">{{ classroom.course }}</div>
            <div class="owner"><i class='bx bx-user-voice'></i><span>{{ classroom.teacher_name }}</span></div>
          </div>
          <div class="info">
            <div class="last-post-info i-item">
              <i class='bx bx-history'></i><span>last posted: {% if classroom.last_post_time %}{{ classroom.last_post_time|date:'j M, Y' }}{% else %}Never{% endif %}</span>
            </div>
            <div class="event-info i-item">
              <i class='bx bx-calendar-event'></i><span>{{classroom.upcoming_events.num_events}} upcoming events</span>
            </div>
          </div>
        </a>
        {% endfor %}
        
      </div>
    </div>
    {% endif %}
    <div class="create-classroom-link">
      <a href="{% url 'classroom:create_classroom' %}"><i class='bx bxs-plus-circle'></i></a>
    </div>
  {% else %}
  <div class="p-5 mb-4 bg-light rounded-3">
    <div class="container-fluid py-5">
      <h1 class="display-6 fw-bold">Welcome</h1>
      <p class="col-md-8 fs-4">Hmm.. Seems like you are not part of any active classroom! Create one or ask your teacher or any of your teammates for a join link.</p>
      <a href="{% url 'classroom:create_classroom' %}" class="btn btn-primary btn-lg" type="button">Create Classroom</a>
    </div>
  </div>
  {% endif %}
  
</div>
{% endblock content %}

